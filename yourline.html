<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>your line</title>
    <style>
        .container{

            display: -webkit-box;
            display: -moz-box;
            display: -ms-flexbox;
            display: -webkit-flex;
            display: flex;
            height:100%;
            width:100%;
            position: absolute;
        }
        .content{
            margin: auto;
            height:300px;
            width:500px;
            border: 1px solid #ccccff;
            box-shadow: 2px 2px 10px #ccccff;
            text-align: center;
            line-height: 300px;
        }
        .content img{
            width:100%;
            height:100%;

        }
        .musiccontent{
            position: absolute;
            left:30%;
            top:80%;
        }
        .musiccontent input[type=text]{
            width:300px;
            margin-left: 15px;
        }
    </style>
</head>
<body>
<div class="container">
  <section class="content">拖拽图片到此处</section>
    <section class="musiccontent">
<div><label for="music">添加音乐</label><input type="file" name="music" id="music" >

</div>
    </section>
</div>
<script>
    var container=document.querySelector('.container'),
            content=container.querySelector('.content');
    container.addEventListener( 'dragover', function ( event ) {

        event.preventDefault();
        event.dataTransfer.dropEffect = 'copy';

    }, false );

    container.addEventListener( 'dragenter', function ( event ) {

        container.style.opacity = 0.5;

    }, false );

    container.addEventListener( 'dragleave', function ( event ) {

        container.style.opacity = 1;

    }, false );

    container.addEventListener( 'drop', function ( event ) {

        event.preventDefault();

        var reader = new FileReader();
        reader.addEventListener( 'load', function ( event ) {
            var imageNode=new Image();
            imageNode.setAttribute('draggable',false);
            imageNode.src= event.target.result;
            content.innerHTML="";
            content.appendChild(imageNode);
            localStorage.setItem('image',imageNode.src);
        }, false );
        try{reader.readAsDataURL( event.dataTransfer.files[ 0 ] );} catch(e){}
        container.style.opacity = 1;

    }, false );
    if(localStorage.getItem('image')) {
        var imageNode=new Image();
        imageNode.setAttribute('draggable',false);
        imageNode.src= localStorage.getItem('image');
        content.innerHTML="";
        content.appendChild(imageNode);
    } else {

    }
    var defaultaduiomgr;
    document.querySelector('input[name=music]').addEventListener('change',function(){
      if(this.files.length!=0) {

          var filereader=new FileReader();
          filereader.onload=function(e){
            var fileresult= e.target.result;
            var audiomgr=new audioMgr();
            defaultaduiomgr&&defaultaduiomgr.source.stop(0);
            audiomgr.play(fileresult);
          }
          filereader.readAsArrayBuffer(this.files[0])
      }
    })

    function loadBuffer(url){

        var request = new XMLHttpRequest();
        request.open("GET", url, true);
        request.responseType = "arraybuffer";


        request.onload = function() {
            defaultaduiomgr=new audioMgr();
            defaultaduiomgr.play(request.response);

        }

        request.onerror = function() {
            alert('BufferLoader: XHR error');
        }

        request.send();

    }

var audioMgr=function() {
    window.AudioContext = window.AudioContext || window.webkitAudioContext;
    this.context = new AudioContext();
    this.source=this.context.createBufferSource();

}
    audioMgr.prototype.play=function(arrayBuffer){
        var self=this;
        this.context.decodeAudioData(
                arrayBuffer,
                function(buffer) {
                    if (!buffer) {
                        alert('error decoding file data: ' + url);
                        return;
                    }
                    self.source.buffer = buffer;

                    self.source.connect(self.context.destination);
                    self.source.loop = true;
                    self.source.start(0);
                },
                function(error) {
                    console.error('decodeAudioData error', error);
                }
        );

    }
    loadBuffer('0.mp3')
</script>
</body>
</html>