<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="个人博客,web前端技术文章">
  <meta name="keywords" content="web前端,HTML5,CSS3,jQuery,Three.js" />
  <meta name="author" content="aboutqx" />
  <title>
    home
  </title>

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="shared/css/base.css" />
  <style>
* {
    box-sizing: border-box;
}
    @font-face {
    font-family: 'NotoSans-Regular';
    src: url('YourWebFontName.eot'); /* IE9 Compat Modes */
    src: url('YourWebFontName.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
       url('YourWebFontName.woff') format('woff'), /* Modern Browsers */
       url('fonts/NotoSans-Regular.ttf')  format('truetype'), /* Safari, Android, iOS */
       url('YourWebFontName.svg#YourWebFontName') format('svg'); /* Legacy iOS */
    }
    .main{

      margin-left:40px;
      margin-top: 15px;
      z-index:100;
      position: relative;
      width:440px;
      height:auto;
      display: -webkit-flex;
      display: -ms-flexbox;
      display: flex;
    }
    .main .clip-wrap{

      font-size:1em;
      display: block;
      color: white;
      background-color: #2196F3;
      -webkit-flex:1;
          -ms-flex:1;
              flex:1;
      margin-right: 10px;
      padding:5px 0 5px 0;
      text-align: center;
      font-family:  Helvetica, sans-serif;
      box-shadow: 0 2px 5px 0 rgba(0,0,0,.26);
    }
    .background-view{
      position: absolute;
      width: 100%;
      height:100%;
      left:0;
      top:0;
      
    }
    .background-view .timestamp{
      
      position: absolute;
      left:80%;
      top:80%;
      font-family: 'NotoSans-Regular',sans-serif;
      font-size: 0.8em;
    }
    .view1{
      background: #ccc;
      
    }
    a:hover,a:active{
      text-decoration: none;
    }


.controlmusic{
  position: absolute;
  left:85%;
  top:1%;
  cursor: pointer;
  padding: 10px;
  display: inline-block;
  color: black;
}
.controlmusic:hover{
  background-color: rgba(158,158,158,0.2);
}
.dept{
  margin-left: 80px;
  margin-top: 30px;
  font-family: 'NotoSans-Regular',sans-serif;
}
/* -- Ripple-effect ----------------------------------- */
.ripple-effect {
  position: relative;
  overflow: hidden;
  -webkit-transform: translatez(0);
}
.ink {
  display: block;
  position: absolute;
  pointer-events: none;
  border-radius: 50%;
  transform: scale(0);
}
.ink {
  background: #fff;
  opacity: 1;
}
.ink.animate {
  -webkit-animation: ripple-effect 0.5s linear;
  -o-animation: ripple-effect 0.5s linear;
  animation: ripple-effect 0.5s linear;
}

@keyframes ripple-effect {
  100% {
    opacity: 0;
    -webkit-transform: scale(2.5);
    -ms-transform: scale(2.5);
    -o-transform: scale(2.5);
    transform: scale(2.5);
  }
}
@-webkit-keyframes ripple-effect {
  100% {
    opacity: 0;
    -webkit-transform: scale(2.5);
    -ms-transform: scale(2.5);
    -o-transform: scale(2.5);
    transform: scale(2.5);
  }
}
@-moz-keyframes ripple-effect {
  100% {
    opacity: 0;
    -webkit-transform: scale(2.5);
    -ms-transform: scale(2.5);
    -o-transform: scale(2.5);
    transform: scale(2.5);
  }
}
@-ms-keyframes ripple-effect {
  100% {
    opacity: 0;
    -webkit-transform: scale(2.5);
    -ms-transform: scale(2.5);
    -o-transform: scale(2.5);
    transform: scale(2.5);
  }
}
@-o-keyframes ripple-effect {
  100% {
    opacity: 0;
    -webkit-transform: scale(2.5);
    -ms-transform: scale(2.5);
    -o-transform: scale(2.5);
    transform: scale(2.5);
  }
}
  </style>


</head>
<body>
<div class="background-view view1"> </div>
<div class="startup background-view">
  <div class="main">

    <a href="codeAndDemo.html" class="codeclip clip-wrap ripple-effect">Code</a>
    <a href="techBlog.html" class="blogclip clip-wrap ripple-effect">Blog</a>
    <a href="hack.html" class="hackclip clip-wrap ripple-effect">Hack</a>
    <a href="movie.html" class="movieclip clip-wrap ripple-effect">Movie</a>
    
  </div>
  <div class="dept">你好各位，这是我的github demo站点</div>
</div>
<div class="background-view">

<span class="timestamp">first visited: </span>
<a class="controlmusic ripple-effect" href="#">Stop Music</a>
</div>
<script src="js/jquery-1.9.1.js"></script>
<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?14477adbfac6547eb550adaea5cc3d48";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();


function getStorage(){
  var span=document.querySelector('.timestamp'),delta=0;

  if(!localStorage.getItem('timestamp')) {
    localStorage.setItem('timestamp', (new Date()).getTime());
    span.innerHTML+="just now"
  } else {
    delta = ((new Date()).getTime() - (new Date()).setTime(localStorage.getItem('timestamp'))) / 1000;
    span.innerHTML+=switchToTime(delta);
    //span.innerHTML+=Math.floor(delta)+'s ago';
  }
}
function switchToTime(second){
  var tmp,suffix=' ago',units=['s','min','hour','day','month','year'],multiple=[1,60,60*60,60*60*24,60*60*24*30,60*60*24*360],
  limits=[60,60,24,30,12,100],result;
  
  for(var i=0;i<multiple.length;i++){
    tmp=second/multiple[i];
    
    if(tmp<limits[i]){
      tmp=Math.floor(tmp);
      if(tmp==1||i==0) {
        suffix=units[i]+suffix;
        result=tmp+suffix;
        break;
      }
      else {
        suffix=units[i]+'s'+suffix;
        result=tmp+suffix;
        break;
      } 
    } 
  }
  return result;
}
getStorage();
var defaultaduiomgr;
  function loadBuffer(url){

    var request = new XMLHttpRequest();
    request.open("GET", url, true);
    request.responseType = "arraybuffer";


    request.onload = function() {
      defaultaduiomgr=new audioMgr();
      defaultaduiomgr.play(request.response);

    }

    request.onerror = function() {
      alert('BufferLoader: XHR error');
    }

    request.send();

  }

  var audioMgr=function() {
    window.AudioContext = window.AudioContext || window.webkitAudioContext;
    this.context = new AudioContext();
    this.source=this.context.createBufferSource();

  }
  audioMgr.prototype.play=function(arrayBuffer){
    var self=this;
    this.context.decodeAudioData(
            arrayBuffer,
            function(buffer) {
              if (!buffer) {
                alert('error decoding file data: ' + url);
                return;
              }
              self.buffer=buffer;
              self.source.buffer = buffer;

              self.source.connect(self.context.destination);
              self.source.loop = true;
              self.source.start(0);
            },
            function(error) {
              console.error('decodeAudioData error', error);
            }
    );

  }
  audioMgr.prototype.stop=function(){
    this.source.stop(0);
  }
  audioMgr.prototype.start=function() {
    this.source=this.context.createBufferSource();
    this.source.buffer = this.buffer;
    this.source.connect(this.context.destination);
    this.source.loop = true;
    this.source.start(0);
  }
  
  if(!localStorage.getItem('musicPrefer')||localStorage.getItem('musicPrefer')=='yes')
    loadBuffer('0.mp3')
  else document.querySelector('.controlmusic').innerHTML='play music'
    
document.querySelector('.controlmusic').addEventListener('click',function(e){
  e.preventDefault();
  if(this.innerHTML=='Stop Music'){
    defaultaduiomgr.stop();
    this.innerHTML='Play Music';
    
    localStorage.setItem('musicPrefer','no')
  } else {
    if(!defaultaduiomgr) loadBuffer('0.mp3')
     else defaultaduiomgr.start();
    this.innerHTML='Stop Music';
    
    localStorage.setItem('musicPrefer','yes')
  }
});
!(function($) {
    $(".ripple-effect").click(function(e){
        var rippler = $(this);

        // create .ink element if it doesn't exist
        if(rippler.find(".ink").length == 0) {
            rippler.append("<span class='ink'></span>");
        }

        var ink = rippler.find(".ink");

        // prevent quick double clicks
        ink.removeClass("animate");

        // set .ink diametr
        if(!ink.height() && !ink.width())
        {
            var d = Math.max(rippler.outerWidth(), rippler.outerHeight());
            ink.css({height: d, width: d});
        }

        // get click coordinates
        var x = e.pageX - rippler.offset().left - ink.width()/2;
        var y = e.pageY - rippler.offset().top - ink.height()/2;

        // set .ink position and add class .animate
        ink.css({
            top: y+'px',
            left:x+'px'
        }).addClass("animate");
    })
})(jQuery);
</script>



</body>
</html>