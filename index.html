<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="个人博客,web前端技术文章">
  <meta name="keywords" content="web前端,HTML5,CSS3,jQuery,Three.js" />
  <meta name="author" content="aboutqx" />
  <title>
    home
  </title>

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel=stylesheet href="css/base.css">
  <link rel="stylesheet" href="shared/css/base.css" />
  <style>
    div.startup {
      display: -webkit-box;
      display: -moz-box;
      display: -ms-flexbox;
      display: -webkit-flex;
      display: flex;
    }
    .main{
      margin: auto;
      height:180px;
      z-index:100;
    }
    span.welcome{

      font-size:88px;

      text-shadow: 0px 0px 40px rgba(0, 191, 243, 0.6);
      color: rgba(255, 255, 255, 1.0);
      font-family:  Helvetica, sans-serif;
    }
    span.go a{
      position: relative;
      left: 0;
      top: 0;
      color: rgba(255, 255, 255, 1.0);
    }
    .go a:hover{
      color: indianred;
      text-decoration: none;
    }
    .background-view{
      position: absolute;
      width: 100%;
      height:100%;
      left:0;
      top:0;
      color: rgba(255, 255, 255, 1.0);
    }
    .background-view .timestamp{
      
      position: relative;
      left:80%;
      top:80%;
      font-family: Microsoft YaHei;
      font-size: 0.8em;
    }
    .view1{
      background: #000;
      
    }
    a:hover,a:active{
      text-decoration: none;
    }
    .welcome a:hover{
      -webkit-transform:rotateX(360deg);
      transform:rotateX(360deg);
    }
      .welcome a{
      transition: all 1.5s ease;
      -moz-transition: all 1.5s ease;  
      -webkit-transition: all 1.5s ease; 
      -o-transition: all 1.5s ease; 
    }
    .clip-wrap {

  position: absolute;
  display: inline-block;
  vertical-align: top;
  padding: 0;
  margin: 0 20px;
  left:0;
  top:1%;
}
.clip-wrap a{
  color: rgba(255, 255, 255, 1.0);
}
.codeclip{
left:20px;
}
.blogclip{
  left:80px;
}
.hackclip{
  left:140px;
}
.movieclip{
  left :200px;
}
.controlmusic{
  position: absolute;
  left:85%;
  top:1%;
  cursor: pointer;
}
  </style>


</head>
<body>
<div class="background-view view1"> </div>
<div class="startup background-view">
  <div class="main">

  <span class="welcome"><a href="#w">w</a>
  <a href="#w">e</a>
  <a href="#w">l</a>
  <a href="#w">c</a>
  <a href="#w">o</a>
  <a href="#w">m</a>
  <a href="#w">e</a>
  &nbsp;
  <a href="#w">t</a>
  <a href="#w">h</a> 
  <a href="#w">e</a>
  <a href="#w">r</a>
  <a href="#w">e</a></span>
    <span class="go"><a href="codeAndDemo.html">&gt;&gt;go ahead</a></span>
  </div>
 
</div>
<div class="background-view">
<div class="codeclip clip-wrap"><a href="codeAndDemo.html">code</a></div>
<div class="blogclip clip-wrap"><a href="techBlog.html">blog</a></div>
<div class="hackclip clip-wrap"><a href="hack.html">hack</a></div>
<div class="movieclip clip-wrap"><a href="movie.html">movie</a></div>
<span class="timestamp">first visited: </span>
<span class="controlmusic">stop music</span>
</div>

<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?14477adbfac6547eb550adaea5cc3d48";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();


function getStorage(){
  var span=document.querySelector('.timestamp'),delta=0;

  if(!localStorage.getItem('timestamp')) {
    localStorage.setItem('timestamp', (new Date()).getTime());
    span.innerHTML+="just now"
  } else {
    delta = ((new Date()).getTime() - (new Date()).setTime(localStorage.getItem('timestamp'))) / 1000;
    //span.innerHTML+=switchToTime(delta);
    span.innerHTML+=Math.ceil(delta)+'s ago';
  }
}
function switchToTime(second){
  var tmp,suffix=' ago',units=['s','min','hour','month','year'],multiple=[1,60,60*60,60*60*24,60*60*24*30],
  limits=[60,60,24,30,365],result;
  
  for(var i=0;i<multiple.length;i++){
    tmp=second/multiple[i];
    if(tmp<limits[i]){
      
      if(tmp==1) {
        suffix=units[i]+suffix;
        result='1'+suffix;
        break;
      }
      else if(!i==0) {
        suffix=units[i]+suffix;
        result=Math.ceil(tmp)+suffix;
        break;
      }

    } 
  }
  return result;
}
getStorage();

  function loadBuffer(url){

    var request = new XMLHttpRequest();
    request.open("GET", url, true);
    request.responseType = "arraybuffer";


    request.onload = function() {
      defaultaduiomgr=new audioMgr();
      defaultaduiomgr.play(request.response);

    }

    request.onerror = function() {
      alert('BufferLoader: XHR error');
    }

    request.send();

  }

  var audioMgr=function() {
    window.AudioContext = window.AudioContext || window.webkitAudioContext;
    this.context = new AudioContext();
    this.source=this.context.createBufferSource();

  }
  audioMgr.prototype.play=function(arrayBuffer){
    var self=this;
    this.context.decodeAudioData(
            arrayBuffer,
            function(buffer) {
              if (!buffer) {
                alert('error decoding file data: ' + url);
                return;
              }
              self.buffer=buffer;
              self.source.buffer = buffer;

              self.source.connect(self.context.destination);
              self.source.loop = true;
              self.source.start(0);
            },
            function(error) {
              console.error('decodeAudioData error', error);
            }
    );

  }
  audioMgr.prototype.stop=function(){
    this.source.stop(0);
  }
  audioMgr.prototype.start=function() {
    this.source=this.context.createBufferSource();
    this.source.buffer = this.buffer;
    this.source.connect(this.context.destination);
    this.source.loop = true;
    this.source.start(0);
  }
  loadBuffer('0.mp3')

document.querySelector('.controlmusic').addEventListener('click',function(){
  if(this.innerHTML=='stop music'){
    defaultaduiomgr.stop();
    this.innerHTML='play music'
  } else {
    defaultaduiomgr.start();
    this.innerHTML='stop music'
  }
})
</script>



</body>
</html>